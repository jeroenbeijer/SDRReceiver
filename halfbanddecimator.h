#ifndef HALFBANDDECIMATOR_H
#define HALFBANDDECIMATOR_H

#include <QVector>
#include "complex.h"
#include "jonti/dsp.h"


typedef std::complex<float> cpx_typef;


class HalfBandDecimator
{

public:
    HalfBandDecimator(int taps, int inlen);
     ~HalfBandDecimator();


void decimate(const std::vector<cpx_typef> & in,std::vector<cpx_typef> & out);


private:

    FIR * fir_i;
    FIR * fir_q;

    float hbcoeff51[51]{
     0.0010175926971811044, 0.0, -0.0013058886799502411, 0.0, 0.0020730260200910026, 0.0, -0.0034255790572079265, 0.0, 0.005490505092950141, 0.0, -0.008434405740804745, 0.0, 0.012502602797600649, 0.0, -0.01810260996706492, 0.0, 0.026000146160530365, 0.0, -0.037851497102093665, 0.0, 0.05801218485928863, 0.0, -0.1025751653146947, 0.0, 0.31684426465520726, 0.499509647157934, 0.3168442646552072, 0.0, -0.10257516531469468, 0.0, 0.05801218485928862, 0.0, -0.03785149710209366, 0.0, 0.02600014616053035, 0.0, -0.018102609967064916, 0.0, 0.012502602797600643, 0.0, -0.008434405740804745, 0.0, 0.005490505092950138, 0.0, -0.0034255790572079218, 0.0, 0.0020730260200910026, 0.0, -0.0013058886799502405, 0.0, 0.0010175926971811044


    };

    float hbcoeff21[21]{
       0.0, 0.003619160996209284, 0.0, -0.012238250198266238, 0.0, 0.034315551069916406, 0.0, -0.08582925310376682, 0.0, 0.31058306173328054, 0.49909945900525354, 0.31058306173328054, 0.0, -0.08582925310376682, 0.0, 0.034315551069916406, 0.0, -0.012238250198266238, 0.0, 0.003619160996209284, 0.0

    };

    float hbcoeff23[23]{

        -0.00014987651418332164,
                        0.0f,
                        0.0014748633283609852f,
                        0.0f,
                        -0.0074416944990005314f,
                        0.0f,
                        0.026163522731980929f,
                        0.0f,
                        -0.077593699116544707f,
                        0.0f,
                        0.30754683719791986f,
                        0.5f,
                        0.30754683719791986f,
                        0.0f,
                        -0.077593699116544707f,
                        0.0f,
                        0.026163522731980929f,
                        0.0f,
                        -0.0074416944990005314f,
                        0.0f,
                        0.0014748633283609852f,
                        0.0f,
                        -0.00014987651418332164f
    };

    float hbcoeff11[11] =
                {
                    0.0060431029837374152f,
                    0.0f,
                    -0.049372515458761493f,
                    0.0f,
                    0.29332944952052842f,
                    0.5f,
                    0.29332944952052842f,
                    0.0f,
                    -0.049372515458761493f,
                    0.0f,
                    0.0060431029837374152f
                };

    float hbcoeff15[15] =
                {
                    -0.001442203300285281f,
                    0.0f,
                    0.013017512802724852f,
                    0.0f,
                    -0.061653278604903369f,
                    0.0f,
                    0.30007792316024057f,
                    0.5f,
                    0.30007792316024057f,
                    0.0f,
                    -0.061653278604903369f,
                    0.0f,
                    0.013017512802724852f,
                    0.0f,
                    -0.001442203300285281f
                };
};




#endif // HALFBANDDECIMATOR_H
